{
  "events": [
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"path\" = '00010002' LIMIT 21",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 1,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 1,
      "elapsed": 0.0008227090000048065,
      "id": 2,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET \"path\" = '00010050' WHERE \"catalogue_category\".\"id\" = 291",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 3,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 3,
      "elapsed": 0.0007628749999923912,
      "id": 4,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 291 LIMIT 21",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 5,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 5,
      "elapsed": 0.00043791600000986364,
      "id": 6,
      "event": "return",
      "thread_id": 1
    },
    {
      "static": true,
      "receiver": {
        "kind": "req",
        "object_id": 4698871312,
        "value": "<class 'oscar.apps.catalogue.models.Category'>",
        "name": "cls",
        "class": "django.db.models.base.ModelBase"
      },
      "parameters": [
        {
          "kind": "opt",
          "object_id": 4341173008,
          "value": "False",
          "name": "destructive",
          "class": "builtins.bool"
        },
        {
          "kind": "opt",
          "object_id": 4341172976,
          "value": "True",
          "name": "fix_paths",
          "class": "builtins.bool"
        }
      ],
      "id": 7,
      "event": "call",
      "thread_id": 1,
      "defined_class": "oscar.apps.catalogue.abstract_models.AbstractCategory",
      "method_id": "fix_tree",
      "path": "src/oscar/apps/catalogue/abstract_models.py",
      "lineno": 246
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET depth=LENGTH(path)/4 WHERE depth!=LENGTH(path)/4",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 8,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 8,
      "elapsed": 0.0006085829999733505,
      "id": 9,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT tbn1.path, tbn1.numchild, (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____') FROM \"catalogue_category\" AS tbn1 WHERE tbn1.numchild != (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____')",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 10,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 10,
      "elapsed": 0.0007772499999987303,
      "id": 11,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET numchild=0 WHERE path='00010050'",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 12,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 12,
      "elapsed": 0.0003907500000082109,
      "id": 13,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SAVEPOINT \"s8669432832_x2623\"",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 14,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 14,
      "elapsed": 0.00027583299998923394,
      "id": 15,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 1 AND \"catalogue_category\".\"path\"::text LIKE '%') ORDER BY \"catalogue_category\".\"path\" ASC",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 16,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 16,
      "elapsed": 0.0006218750000073214,
      "id": 17,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 2 AND \"catalogue_category\".\"path\"::text LIKE '0001%') ORDER BY \"catalogue_category\".\"path\" ASC",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 18,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 18,
      "elapsed": 0.0005415830000004007,
      "id": 19,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010002')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010003%'",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 20,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 20,
      "elapsed": 0.0009121669999956339,
      "id": 21,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010003')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010050%'",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 22,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 22,
      "elapsed": 0.0004961660000049051,
      "id": 23,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 3 AND \"catalogue_category\".\"path\"::text LIKE '00010001%') ORDER BY \"catalogue_category\".\"path\" ASC",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 24,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 24,
      "elapsed": 0.0005181250000134696,
      "id": 25,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('000100010001')::text, (SUBSTRING(\"catalogue_category\".\"path\", 13))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '000100010002%'",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 26,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 26,
      "elapsed": 0.0005035410000004958,
      "id": 27,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "RELEASE SAVEPOINT \"s8669432832_x2623\"",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 28,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 28,
      "elapsed": 0.0003726250000113396,
      "id": 29,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"depth\" = 1 ORDER BY \"catalogue_category\".\"path\" ASC",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 30,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 30,
      "elapsed": 0.0004747920000056638,
      "id": 31,
      "event": "return",
      "thread_id": 1
    },
    {
      "static": false,
      "receiver": {
        "kind": "req",
        "object_id": 13813263232,
        "value": "<Category: Books>",
        "name": "self",
        "class": "oscar.apps.catalogue.models.Category"
      },
      "id": 32,
      "event": "call",
      "thread_id": 1,
      "defined_class": "oscar.apps.catalogue.abstract_models.AbstractCategory",
      "method_id": "set_ancestors_are_public",
      "path": "src/oscar/apps/catalogue/abstract_models.py",
      "lineno": 230
    },
    {
      "static": false,
      "receiver": {
        "kind": "req",
        "object_id": 13813263232,
        "value": "<Category: Books>",
        "name": "self",
        "class": "oscar.apps.catalogue.models.Category"
      },
      "id": 33,
      "event": "call",
      "thread_id": 1,
      "defined_class": "oscar.apps.catalogue.abstract_models.AbstractCategory",
      "method_id": "get_descendants_and_self",
      "path": "src/oscar/apps/catalogue/abstract_models.py",
      "lineno": 275
    },
    {
      "return_value": {
        "object_id": 13813260880,
        "value": "<CategoryQuerySet [<Category: Books>, <Category: Books > Fiction>, <Category: Books > Fiction > Comedy>, <Category: Books > Children>, <Category: Books > Children > Biography>, <Category: Books > Children > Programming>, <Category: Books > Children > Horror>, <Category: Books > Children > Horror > Teen>, <Category: Books > Children > Horror > Gothic>, <Category: Books > Non-fiction>]>",
        "class": "oscar.apps.catalogue.managers.CategoryQuerySet"
      },
      "parent_id": 33,
      "elapsed": 0.00006914138793945312,
      "id": 34,
      "event": "return",
      "thread_id": 1
    },
    {
      "static": false,
      "receiver": {
        "kind": "req",
        "object_id": 13813298320,
        "value": "ReverseStartsWith(Col(U0, catalogue.Category.path), Col(catalogue_category, catalogue.Category.path))",
        "name": "self",
        "class": "oscar.apps.catalogue.abstract_models.ReverseStartsWith"
      },
      "parameters": [
        {
          "kind": "req",
          "object_id": 13813298416,
          "value": "<SQLCompiler model=Category connection=<DatabaseWrapper vendor='postgresql' alias='default'> using=None>",
          "name": "compiler",
          "class": "django.db.models.sql.compiler.SQLCompiler"
        },
        {
          "kind": "req",
          "object_id": 4385983600,
          "value": "<DatabaseWrapper vendor='postgresql' alias='default'>",
          "name": "connection",
          "class": "django.db.backends.postgresql.base.DatabaseWrapper"
        },
        {
          "kind": "opt",
          "object_id": 4341250928,
          "value": "None",
          "name": "lhs",
          "class": "builtins.NoneType"
        }
      ],
      "id": 35,
      "event": "call",
      "thread_id": 1,
      "defined_class": "oscar.apps.catalogue.abstract_models.ReverseStartsWith",
      "method_id": "process_lhs",
      "path": "src/oscar/apps/catalogue/abstract_models.py",
      "lineno": 71
    },
    {
      "return_value": {
        "object_id": 13813278336,
        "value": "('(\"catalogue_category\".\"path\")', [])",
        "class": "builtins.tuple"
      },
      "parent_id": 35,
      "elapsed": 0.000007152557373046875,
      "id": 36,
      "event": "return",
      "thread_id": 1
    },
    {
      "static": false,
      "receiver": {
        "kind": "req",
        "object_id": 13813298320,
        "value": "ReverseStartsWith(Col(U0, catalogue.Category.path), Col(catalogue_category, catalogue.Category.path))",
        "name": "self",
        "class": "oscar.apps.catalogue.abstract_models.ReverseStartsWith"
      },
      "parameters": [
        {
          "kind": "req",
          "object_id": 13813298416,
          "value": "<SQLCompiler model=Category connection=<DatabaseWrapper vendor='postgresql' alias='default'> using=None>",
          "name": "qn",
          "class": "django.db.models.sql.compiler.SQLCompiler"
        },
        {
          "kind": "req",
          "object_id": 4385983600,
          "value": "<DatabaseWrapper vendor='postgresql' alias='default'>",
          "name": "connection",
          "class": "django.db.backends.postgresql.base.DatabaseWrapper"
        }
      ],
      "id": 37,
      "event": "call",
      "thread_id": 1,
      "defined_class": "oscar.apps.catalogue.abstract_models.ReverseStartsWith",
      "method_id": "process_rhs",
      "path": "src/oscar/apps/catalogue/abstract_models.py",
      "lineno": 68
    },
    {
      "return_value": {
        "object_id": 13813244096,
        "value": "('U0.\"path\"::text', [])",
        "class": "builtins.tuple"
      },
      "parent_id": 37,
      "elapsed": 0.000013113021850585938,
      "id": 38,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "UPDATE \"catalogue_category\" SET \"ancestors_are_public\" = NOT EXISTS(SELECT 1 AS \"a\" FROM \"catalogue_category\" U0 WHERE (U0.\"depth\" < (\"catalogue_category\".\"depth\") AND NOT U0.\"is_public\" AND (\"catalogue_category\".\"path\") LIKE REPLACE(REPLACE(REPLACE(U0.\"path\"::text, E'\\\\', E'\\\\\\\\'), E'%', E'\\\\%'), E'_', E'\\\\_') || '%') LIMIT 1) WHERE (\"catalogue_category\".\"depth\" >= 1 AND \"catalogue_category\".\"path\"::text LIKE '0001%')",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 39,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 39,
      "elapsed": 0.0008682080000141923,
      "id": 40,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 285 LIMIT 21",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 41,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 41,
      "elapsed": 0.00047154100002444466,
      "id": 42,
      "event": "return",
      "thread_id": 1
    },
    {
      "return_value": {
        "object_id": 4341250928,
        "value": "None",
        "class": "builtins.NoneType"
      },
      "parent_id": 32,
      "elapsed": 0.010272979736328125,
      "id": 43,
      "event": "return",
      "thread_id": 1
    },
    {
      "return_value": {
        "object_id": 4341250928,
        "value": "None",
        "class": "builtins.NoneType"
      },
      "parent_id": 7,
      "elapsed": 0.019414901733398438,
      "id": 44,
      "event": "return",
      "thread_id": 1
    },
    {
      "sql_query": {
        "sql": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 291 LIMIT 21",
        "database_type": "postgresql",
        "server_version": "14.0.12"
      },
      "id": 45,
      "event": "call",
      "thread_id": 1
    },
    {
      "parent_id": 45,
      "elapsed": 0.0005754580000143505,
      "id": 46,
      "event": "return",
      "thread_id": 1
    }
  ],
  "version": "1.9",
  "metadata": {
    "language": {
      "name": "python",
      "engine": "CPython",
      "version": "3.8.19"
    },
    "client": {
      "name": "appmap",
      "url": "https://github.com/applandinc/appmap-python"
    },
    "git": {
      "repository": "https://github.com/land-of-apps/django-oscar.git",
      "branch": "master",
      "commit": "01aa57720e1e703bdc166b20350eff665be60dad"
    },
    "frameworks": [
      {
        "name": "pytest",
        "version": "7.4.4"
      },
      {
        "name": "Django",
        "version": "4.2.13"
      }
    ],
    "feature_group": "Moving a category",
    "recording": {
      "defined_class": "tests.integration.catalogue.test_category.TestMovingACategory",
      "method_id": "test_fix_tree"
    },
    "source_location": "tests/integration/catalogue/test_category.py:92",
    "name": "Moving a category fix tree",
    "feature": "Fix tree",
    "app": "django-oscar",
    "recorder": {
      "name": "pytest",
      "type": "tests"
    },
    "test_status": "succeeded"
  },
  "classMap": [
    {
      "name": "oscar",
      "type": "package",
      "children": [
        {
          "name": "apps",
          "type": "package",
          "children": [
            {
              "name": "catalogue",
              "type": "package",
              "children": [
                {
                  "name": "abstract_models",
                  "type": "package",
                  "children": [
                    {
                      "name": "AbstractCategory",
                      "type": "class",
                      "children": [
                        {
                          "name": "fix_tree",
                          "type": "function",
                          "static": true,
                          "location": "src/oscar/apps/catalogue/abstract_models.py:246"
                        },
                        {
                          "name": "set_ancestors_are_public",
                          "type": "function",
                          "static": false,
                          "location": "src/oscar/apps/catalogue/abstract_models.py:230"
                        },
                        {
                          "name": "get_descendants_and_self",
                          "type": "function",
                          "static": false,
                          "location": "src/oscar/apps/catalogue/abstract_models.py:275"
                        }
                      ]
                    },
                    {
                      "name": "ReverseStartsWith",
                      "type": "class",
                      "children": [
                        {
                          "name": "process_lhs",
                          "type": "function",
                          "static": false,
                          "location": "src/oscar/apps/catalogue/abstract_models.py:71"
                        },
                        {
                          "name": "process_rhs",
                          "type": "function",
                          "static": false,
                          "location": "src/oscar/apps/catalogue/abstract_models.py:68"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "database",
      "name": "Database",
      "children": [
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"path\" = '00010002' LIMIT 21"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET \"path\" = '00010050' WHERE \"catalogue_category\".\"id\" = 291"
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 291 LIMIT 21"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET depth=LENGTH(path)/4 WHERE depth!=LENGTH(path)/4"
        },
        {
          "type": "query",
          "name": "SELECT tbn1.path, tbn1.numchild, (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____') FROM \"catalogue_category\" AS tbn1 WHERE tbn1.numchild != (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____')"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET numchild=0 WHERE path='00010050'"
        },
        {
          "type": "query",
          "name": "SAVEPOINT \"s8669432832_x2623\""
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 1 AND \"catalogue_category\".\"path\"::text LIKE '%') ORDER BY \"catalogue_category\".\"path\" ASC"
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 2 AND \"catalogue_category\".\"path\"::text LIKE '0001%') ORDER BY \"catalogue_category\".\"path\" ASC"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010002')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010003%'"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010003')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010050%'"
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 3 AND \"catalogue_category\".\"path\"::text LIKE '00010001%') ORDER BY \"catalogue_category\".\"path\" ASC"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('000100010001')::text, (SUBSTRING(\"catalogue_category\".\"path\", 13))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '000100010002%'"
        },
        {
          "type": "query",
          "name": "RELEASE SAVEPOINT \"s8669432832_x2623\""
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"depth\" = 1 ORDER BY \"catalogue_category\".\"path\" ASC"
        },
        {
          "type": "query",
          "name": "UPDATE \"catalogue_category\" SET \"ancestors_are_public\" = NOT EXISTS(SELECT 1 AS \"a\" FROM \"catalogue_category\" U0 WHERE (U0.\"depth\" < (\"catalogue_category\".\"depth\") AND NOT U0.\"is_public\" AND (\"catalogue_category\".\"path\") LIKE REPLACE(REPLACE(REPLACE(U0.\"path\"::text, E'\\\\', E'\\\\\\\\'), E'%', E'\\\\%'), E'_', E'\\\\_') || '%') LIMIT 1) WHERE (\"catalogue_category\".\"depth\" >= 1 AND \"catalogue_category\".\"path\"::text LIKE '0001%')"
        },
        {
          "type": "query",
          "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 285 LIMIT 21"
        }
      ]
    }
  ]
}