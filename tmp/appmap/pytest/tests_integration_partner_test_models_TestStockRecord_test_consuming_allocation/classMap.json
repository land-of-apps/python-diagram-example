[
  {
    "name": "oscar",
    "type": "package",
    "children": [
      {
        "name": "apps",
        "type": "package",
        "children": [
          {
            "name": "partner",
            "type": "package",
            "children": [
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractStockRecord",
                    "type": "class",
                    "children": [
                      {
                        "name": "allocate",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/abstract_models.py:191"
                      },
                      {
                        "name": "pre_save_signal",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/abstract_models.py:281"
                      },
                      {
                        "name": "post_save_signal",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/abstract_models.py:290"
                      },
                      {
                        "name": "consume_allocation",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/abstract_models.py:227"
                      },
                      {
                        "name": "is_allocation_consumption_possible",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/abstract_models.py:221"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "catalogue",
            "type": "package",
            "children": [
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractProduct",
                    "type": "class",
                    "children": [
                      {
                        "name": "get_product_class",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:703"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "customer",
            "type": "package",
            "children": [
              {
                "name": "alerts",
                "type": "package",
                "children": [
                  {
                    "name": "utils",
                    "type": "package",
                    "children": [
                      {
                        "name": "AlertsDispatcher",
                        "type": "class",
                        "children": [
                          {
                            "name": "send_product_alert_email_for_user",
                            "type": "function",
                            "static": false,
                            "location": "src/oscar/apps/customer/alerts/utils.py:52"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "database",
    "name": "Database",
    "children": [
      {
        "type": "query",
        "name": "UPDATE \"partner_stockrecord\" SET \"num_allocated\" = (COALESCE(\"partner_stockrecord\".\"num_allocated\", 0) + 5) WHERE \"partner_stockrecord\".\"id\" = 889"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"num_allocated\" FROM \"partner_stockrecord\" WHERE \"partner_stockrecord\".\"id\" = 889 LIMIT 21"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockalert\".\"id\", \"partner_stockalert\".\"stockrecord_id\", \"partner_stockalert\".\"threshold\", \"partner_stockalert\".\"status\", \"partner_stockalert\".\"date_created\", \"partner_stockalert\".\"date_closed\" FROM \"partner_stockalert\" WHERE (\"partner_stockalert\".\"status\" = 'Open' AND \"partner_stockalert\".\"stockrecord_id\" = 889) LIMIT 21"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"product_id\", \"partner_stockrecord\".\"partner_id\", \"partner_stockrecord\".\"partner_sku\", \"partner_stockrecord\".\"price_currency\", \"partner_stockrecord\".\"price\", \"partner_stockrecord\".\"num_in_stock\", \"partner_stockrecord\".\"num_allocated\", \"partner_stockrecord\".\"low_stock_threshold\", \"partner_stockrecord\".\"date_created\", \"partner_stockrecord\".\"date_updated\", \"partner_stockrecord\".\"offer_name\" FROM \"partner_stockrecord\" WHERE \"partner_stockrecord\".\"product_id\" = 1215"
      },
      {
        "type": "query",
        "name": "SELECT COUNT(*) AS \"__count\" FROM \"customer_productalert\" WHERE (\"customer_productalert\".\"product_id\" IN (1215) AND \"customer_productalert\".\"status\" = 'Active')"
      },
      {
        "type": "query",
        "name": "SELECT \"customer_productalert\".\"id\", \"customer_productalert\".\"product_id\", \"customer_productalert\".\"user_id\", \"customer_productalert\".\"email\", \"customer_productalert\".\"key\", \"customer_productalert\".\"status\", \"customer_productalert\".\"date_created\", \"customer_productalert\".\"date_confirmed\", \"customer_productalert\".\"date_cancelled\", \"customer_productalert\".\"date_closed\" FROM \"customer_productalert\" WHERE (\"customer_productalert\".\"product_id\" IN (1215) AND \"customer_productalert\".\"status\" = 'Active') ORDER BY \"customer_productalert\".\"date_created\" DESC"
      },
      {
        "type": "query",
        "name": "UPDATE \"partner_stockrecord\" SET \"num_allocated\" = (COALESCE(\"partner_stockrecord\".\"num_allocated\", 0) - 3), \"num_in_stock\" = (COALESCE(\"partner_stockrecord\".\"num_in_stock\", 0) - 3) WHERE \"partner_stockrecord\".\"id\" = 889"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"num_in_stock\", \"partner_stockrecord\".\"num_allocated\" FROM \"partner_stockrecord\" WHERE \"partner_stockrecord\".\"id\" = 889 LIMIT 21"
      }
    ]
  }
]