[
  {
    "name": "oscar",
    "type": "package",
    "children": [
      {
        "name": "apps",
        "type": "package",
        "children": [
          {
            "name": "catalogue",
            "type": "package",
            "children": [
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractCategory",
                    "type": "class",
                    "children": [
                      {
                        "name": "fix_tree",
                        "type": "function",
                        "static": true,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:246"
                      },
                      {
                        "name": "set_ancestors_are_public",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:230"
                      },
                      {
                        "name": "get_descendants_and_self",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:275"
                      }
                    ]
                  },
                  {
                    "name": "ReverseStartsWith",
                    "type": "class",
                    "children": [
                      {
                        "name": "process_lhs",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:71"
                      },
                      {
                        "name": "process_rhs",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:68"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "database",
    "name": "Database",
    "children": [
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"path\" = '00010002' LIMIT 21"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET \"path\" = '00010050' WHERE \"catalogue_category\".\"id\" = 291"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 291 LIMIT 21"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET depth=LENGTH(path)/4 WHERE depth!=LENGTH(path)/4"
      },
      {
        "type": "query",
        "name": "SELECT tbn1.path, tbn1.numchild, (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____') FROM \"catalogue_category\" AS tbn1 WHERE tbn1.numchild != (SELECT COUNT(1) FROM \"catalogue_category\" AS tbn2 WHERE tbn2.path LIKE tbn1.path||'____')"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET numchild=0 WHERE path='00010050'"
      },
      {
        "type": "query",
        "name": "SAVEPOINT \"s8669432832_x2623\""
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 1 AND \"catalogue_category\".\"path\"::text LIKE '%') ORDER BY \"catalogue_category\".\"path\" ASC"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 2 AND \"catalogue_category\".\"path\"::text LIKE '0001%') ORDER BY \"catalogue_category\".\"path\" ASC"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010002')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010003%'"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('00010003')::text, (SUBSTRING(\"catalogue_category\".\"path\", 9))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '00010050%'"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\" FROM \"catalogue_category\" WHERE (\"catalogue_category\".\"depth\" = 3 AND \"catalogue_category\".\"path\"::text LIKE '00010001%') ORDER BY \"catalogue_category\".\"path\" ASC"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET \"path\" = CONCAT(('000100010001')::text, (SUBSTRING(\"catalogue_category\".\"path\", 13))::text) WHERE \"catalogue_category\".\"path\"::text LIKE '000100010002%'"
      },
      {
        "type": "query",
        "name": "RELEASE SAVEPOINT \"s8669432832_x2623\""
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"depth\" = 1 ORDER BY \"catalogue_category\".\"path\" ASC"
      },
      {
        "type": "query",
        "name": "UPDATE \"catalogue_category\" SET \"ancestors_are_public\" = NOT EXISTS(SELECT 1 AS \"a\" FROM \"catalogue_category\" U0 WHERE (U0.\"depth\" < (\"catalogue_category\".\"depth\") AND NOT U0.\"is_public\" AND (\"catalogue_category\".\"path\") LIKE REPLACE(REPLACE(REPLACE(U0.\"path\"::text, E'\\\\', E'\\\\\\\\'), E'%', E'\\\\%'), E'_', E'\\\\_') || '%') LIMIT 1) WHERE (\"catalogue_category\".\"depth\" >= 1 AND \"catalogue_category\".\"path\"::text LIKE '0001%')"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_category\".\"id\", \"catalogue_category\".\"path\", \"catalogue_category\".\"depth\", \"catalogue_category\".\"numchild\", \"catalogue_category\".\"name\", \"catalogue_category\".\"description\", \"catalogue_category\".\"meta_title\", \"catalogue_category\".\"meta_description\", \"catalogue_category\".\"image\", \"catalogue_category\".\"slug\", \"catalogue_category\".\"is_public\", \"catalogue_category\".\"ancestors_are_public\" FROM \"catalogue_category\" WHERE \"catalogue_category\".\"id\" = 285 LIMIT 21"
      }
    ]
  }
]