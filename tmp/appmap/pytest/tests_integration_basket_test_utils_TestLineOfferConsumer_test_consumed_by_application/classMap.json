[
  {
    "name": "oscar",
    "type": "package",
    "children": [
      {
        "name": "apps",
        "type": "package",
        "children": [
          {
            "name": "offer",
            "type": "package",
            "children": [
              {
                "name": "applicator",
                "type": "package",
                "children": [
                  {
                    "name": "Applicator",
                    "type": "class",
                    "children": [
                      {
                        "name": "apply",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:15"
                      },
                      {
                        "name": "get_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:45"
                      },
                      {
                        "name": "get_site_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:66"
                      },
                      {
                        "name": "get_basket_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:77"
                      },
                      {
                        "name": "get_user_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:96"
                      },
                      {
                        "name": "get_session_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:104"
                      },
                      {
                        "name": "apply_offers",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/applicator.py:25"
                      }
                    ]
                  }
                ]
              },
              {
                "name": "managers",
                "type": "package",
                "children": [
                  {
                    "name": "ActiveOfferManager",
                    "type": "class",
                    "children": [
                      {
                        "name": "get_queryset",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/managers.py:12"
                      }
                    ]
                  }
                ]
              },
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractConditionalOffer",
                    "type": "class",
                    "children": [
                      {
                        "name": "get_max_applications",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:381"
                      },
                      {
                        "name": "apply_benefit",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:360"
                      },
                      {
                        "name": "is_condition_satisfied",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:351"
                      },
                      {
                        "name": "get_voucher",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:378"
                      }
                    ]
                  },
                  {
                    "name": "BaseOfferMixin",
                    "type": "class",
                    "children": [
                      {
                        "name": "proxy",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:36"
                      }
                    ]
                  },
                  {
                    "name": "AbstractCondition",
                    "type": "class",
                    "children": [
                      {
                        "name": "can_apply_condition",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:930"
                      }
                    ]
                  },
                  {
                    "name": "AbstractRange",
                    "type": "class",
                    "children": [
                      {
                        "name": "contains_product",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:1077"
                      }
                    ]
                  },
                  {
                    "name": "AbstractBenefit",
                    "type": "class",
                    "children": [
                      {
                        "name": "get_applicable_lines",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:782"
                      },
                      {
                        "name": "can_apply_benefit",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:775"
                      },
                      {
                        "name": "_effective_max_affected_items",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:768"
                      },
                      {
                        "name": "round",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/abstract_models.py:755"
                      }
                    ]
                  }
                ]
              },
              {
                "name": "conditions",
                "type": "package",
                "children": [
                  {
                    "name": "CountCondition",
                    "type": "class",
                    "children": [
                      {
                        "name": "is_satisfied",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/conditions.py:44"
                      }
                    ]
                  }
                ]
              },
              {
                "name": "benefits",
                "type": "package",
                "children": [
                  {
                    "name": "PercentageDiscountBenefit",
                    "type": "class",
                    "children": [
                      {
                        "name": "apply",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/benefits.py:67"
                      }
                    ]
                  },
                  {
                    "name": "apply_discount",
                    "type": "function",
                    "static": true,
                    "location": "src/oscar/apps/offer/benefits.py:33"
                  }
                ]
              },
              {
                "name": "utils",
                "type": "class",
                "children": [
                  {
                    "name": "unit_price",
                    "type": "function",
                    "static": true,
                    "location": "src/oscar/apps/offer/utils.py:20"
                  }
                ]
              },
              {
                "name": "results",
                "type": "package",
                "children": [
                  {
                    "name": "OfferApplications",
                    "type": "class",
                    "children": [
                      {
                        "name": "add",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/offer/results.py:24"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "basket",
            "type": "package",
            "children": [
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractBasket",
                    "type": "class",
                    "children": [
                      {
                        "name": "all_lines",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/abstract_models.py:130"
                      }
                    ]
                  },
                  {
                    "name": "AbstractLine",
                    "type": "class",
                    "children": [
                      {
                        "name": "quantity_without_offer_discount",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/abstract_models.py:858"
                      },
                      {
                        "name": "quantity_with_offer_discount",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/abstract_models.py:855"
                      },
                      {
                        "name": "discount",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/abstract_models.py:771"
                      },
                      {
                        "name": "consume",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/abstract_models.py:791"
                      }
                    ]
                  }
                ]
              },
              {
                "name": "utils",
                "type": "package",
                "children": [
                  {
                    "name": "LineOfferConsumer",
                    "type": "class",
                    "children": [
                      {
                        "name": "available",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/utils.py:150"
                      },
                      {
                        "name": "consumed",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/utils.py:128"
                      },
                      {
                        "name": "consume",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/utils.py:104"
                      },
                      {
                        "name": "_cache",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/utils.py:94"
                      },
                      {
                        "name": "_update_affected_quantity",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/basket/utils.py:97"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "partner",
            "type": "package",
            "children": [
              {
                "name": "strategy",
                "type": "package",
                "children": [
                  {
                    "name": "Base",
                    "type": "class",
                    "children": [
                      {
                        "name": "fetch_for_line",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/strategy.py:94"
                      }
                    ]
                  },
                  {
                    "name": "Structured",
                    "type": "class",
                    "children": [
                      {
                        "name": "fetch_for_product",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/strategy.py:119"
                      }
                    ]
                  },
                  {
                    "name": "UseFirstStockRecord",
                    "type": "class",
                    "children": [
                      {
                        "name": "select_stockrecord",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/strategy.py:198"
                      }
                    ]
                  },
                  {
                    "name": "NoTax",
                    "type": "class",
                    "children": [
                      {
                        "name": "pricing_policy",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/strategy.py:238"
                      }
                    ]
                  },
                  {
                    "name": "StockRequired",
                    "type": "class",
                    "children": [
                      {
                        "name": "availability_policy",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/partner/strategy.py:214"
                      }
                    ]
                  }
                ]
              }
            ]
          },
          {
            "name": "catalogue",
            "type": "package",
            "children": [
              {
                "name": "abstract_models",
                "type": "package",
                "children": [
                  {
                    "name": "AbstractProduct",
                    "type": "class",
                    "children": [
                      {
                        "name": "get_product_class",
                        "type": "function",
                        "static": false,
                        "location": "src/oscar/apps/catalogue/abstract_models.py:703"
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "name": "core",
        "type": "package",
        "children": [
          {
            "name": "loading",
            "type": "class",
            "children": [
              {
                "name": "get_model",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:225"
              },
              {
                "name": "get_class",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:25"
              },
              {
                "name": "get_classes",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:48"
              },
              {
                "name": "default_class_loader",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:53"
              },
              {
                "name": "_import_module",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:135"
              },
              {
                "name": "_find_registered_app_name",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:183"
              },
              {
                "name": "_pluck_classes",
                "type": "function",
                "static": true,
                "location": "src/oscar/core/loading.py:161"
              }
            ]
          }
        ]
      },
      {
        "name": "models",
        "type": "package",
        "children": [
          {
            "name": "fields",
            "type": "package",
            "children": [
              {
                "name": "NullCharField",
                "type": "class",
                "children": [
                  {
                    "name": "from_db_value",
                    "type": "function",
                    "static": false,
                    "location": "src/oscar/models/fields/__init__.py:117"
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "type": "database",
    "name": "Database",
    "children": [
      {
        "type": "query",
        "name": "SELECT \"offer_conditionaloffer\".\"id\", \"offer_conditionaloffer\".\"name\", \"offer_conditionaloffer\".\"slug\", \"offer_conditionaloffer\".\"description\", \"offer_conditionaloffer\".\"offer_type\", \"offer_conditionaloffer\".\"exclusive\", \"offer_conditionaloffer\".\"status\", \"offer_conditionaloffer\".\"condition_id\", \"offer_conditionaloffer\".\"benefit_id\", \"offer_conditionaloffer\".\"priority\", \"offer_conditionaloffer\".\"start_datetime\", \"offer_conditionaloffer\".\"end_datetime\", \"offer_conditionaloffer\".\"max_global_applications\", \"offer_conditionaloffer\".\"max_user_applications\", \"offer_conditionaloffer\".\"max_basket_applications\", \"offer_conditionaloffer\".\"max_discount\", \"offer_conditionaloffer\".\"total_discount\", \"offer_conditionaloffer\".\"num_applications\", \"offer_conditionaloffer\".\"num_orders\", \"offer_conditionaloffer\".\"redirect_url\", \"offer_conditionaloffer\".\"date_created\", \"offer_condition\".\"id\", \"offer_condition\".\"range_id\", \"offer_condition\".\"type\", \"offer_condition\".\"value\", \"offer_condition\".\"proxy_class\", \"offer_benefit\".\"id\", \"offer_benefit\".\"range_id\", \"offer_benefit\".\"type\", \"offer_benefit\".\"value\", \"offer_benefit\".\"max_affected_items\", \"offer_benefit\".\"proxy_class\" FROM \"offer_conditionaloffer\" INNER JOIN \"offer_condition\" ON (\"offer_conditionaloffer\".\"condition_id\" = \"offer_condition\".\"id\") INNER JOIN \"offer_benefit\" ON (\"offer_conditionaloffer\".\"benefit_id\" = \"offer_benefit\".\"id\") WHERE ((\"offer_conditionaloffer\".\"end_datetime\" >= '2024-07-22T17:25:26.354373+00:00'::timestamptz OR \"offer_conditionaloffer\".\"end_datetime\" IS NULL) AND (\"offer_conditionaloffer\".\"start_datetime\" <= '2024-07-22T17:25:26.354373+00:00'::timestamptz OR \"offer_conditionaloffer\".\"start_datetime\" IS NULL) AND \"offer_conditionaloffer\".\"status\" = 'Open' AND \"offer_conditionaloffer\".\"offer_type\" = 'Site') ORDER BY \"offer_conditionaloffer\".\"priority\" DESC, \"offer_conditionaloffer\".\"id\" ASC"
      },
      {
        "type": "query",
        "name": "SELECT \"basket_line\".\"id\", \"basket_line\".\"basket_id\", \"basket_line\".\"line_reference\", \"basket_line\".\"product_id\", \"basket_line\".\"stockrecord_id\", \"basket_line\".\"quantity\", \"basket_line\".\"price_currency\", \"basket_line\".\"price_excl_tax\", \"basket_line\".\"price_incl_tax\", \"basket_line\".\"tax_code\", \"basket_line\".\"date_created\", \"basket_line\".\"date_updated\", \"catalogue_product\".\"id\", \"catalogue_product\".\"structure\", \"catalogue_product\".\"is_public\", \"catalogue_product\".\"upc\", \"catalogue_product\".\"parent_id\", \"catalogue_product\".\"title\", \"catalogue_product\".\"slug\", \"catalogue_product\".\"description\", \"catalogue_product\".\"meta_title\", \"catalogue_product\".\"meta_description\", \"catalogue_product\".\"product_class_id\", \"catalogue_product\".\"rating\", \"catalogue_product\".\"date_created\", \"catalogue_product\".\"date_updated\", \"catalogue_product\".\"is_discountable\", \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"product_id\", \"partner_stockrecord\".\"partner_id\", \"partner_stockrecord\".\"partner_sku\", \"partner_stockrecord\".\"price_currency\", \"partner_stockrecord\".\"price\", \"partner_stockrecord\".\"num_in_stock\", \"partner_stockrecord\".\"num_allocated\", \"partner_stockrecord\".\"low_stock_threshold\", \"partner_stockrecord\".\"date_created\", \"partner_stockrecord\".\"date_updated\", \"partner_stockrecord\".\"offer_name\" FROM \"basket_line\" INNER JOIN \"catalogue_product\" ON (\"basket_line\".\"product_id\" = \"catalogue_product\".\"id\") INNER JOIN \"partner_stockrecord\" ON (\"basket_line\".\"stockrecord_id\" = \"partner_stockrecord\".\"id\") WHERE \"basket_line\".\"basket_id\" = 7 ORDER BY \"basket_line\".\"id\" ASC"
      },
      {
        "type": "query",
        "name": "SELECT \"basket_lineattribute\".\"id\", \"basket_lineattribute\".\"line_id\", \"basket_lineattribute\".\"option_id\", \"basket_lineattribute\".\"value\" FROM \"basket_lineattribute\" WHERE \"basket_lineattribute\".\"line_id\" IN (13, 14)"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_productimage\".\"id\", \"catalogue_productimage\".\"product_id\", \"catalogue_productimage\".\"original\", \"catalogue_productimage\".\"caption\", \"catalogue_productimage\".\"display_order\", \"catalogue_productimage\".\"date_created\" FROM \"catalogue_productimage\" WHERE \"catalogue_productimage\".\"product_id\" IN (13, 14) ORDER BY \"catalogue_productimage\".\"display_order\" ASC"
      },
      {
        "type": "query",
        "name": "SELECT 1 AS \"a\" FROM \"catalogue_product\" WHERE (NOT (\"catalogue_product\".\"id\" IN (SELECT U0.\"id\" FROM \"catalogue_product\" U0 INNER JOIN \"offer_range_excluded_products\" U1 ON (U0.\"id\" = U1.\"product_id\") WHERE U1.\"range_id\" = 19)) AND \"catalogue_product\".\"id\" = 13) LIMIT 1"
      },
      {
        "type": "query",
        "name": "SELECT 1 AS \"a\" FROM \"catalogue_product\" WHERE (NOT (\"catalogue_product\".\"id\" IN (SELECT U0.\"id\" FROM \"catalogue_product\" U0 INNER JOIN \"offer_range_excluded_products\" U1 ON (U0.\"id\" = U1.\"product_id\") WHERE U1.\"range_id\" = 18)) AND \"catalogue_product\".\"id\" = 13) LIMIT 1"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"product_id\", \"partner_stockrecord\".\"partner_id\", \"partner_stockrecord\".\"partner_sku\", \"partner_stockrecord\".\"price_currency\", \"partner_stockrecord\".\"price\", \"partner_stockrecord\".\"num_in_stock\", \"partner_stockrecord\".\"num_allocated\", \"partner_stockrecord\".\"low_stock_threshold\", \"partner_stockrecord\".\"date_created\", \"partner_stockrecord\".\"date_updated\", \"partner_stockrecord\".\"offer_name\" FROM \"partner_stockrecord\" WHERE \"partner_stockrecord\".\"product_id\" = 13 LIMIT 1"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_productclass\".\"id\", \"catalogue_productclass\".\"name\", \"catalogue_productclass\".\"slug\", \"catalogue_productclass\".\"requires_shipping\", \"catalogue_productclass\".\"track_stock\" FROM \"catalogue_productclass\" WHERE \"catalogue_productclass\".\"id\" = 13 LIMIT 21"
      },
      {
        "type": "query",
        "name": "SELECT 1 AS \"a\" FROM \"catalogue_product\" WHERE (NOT (\"catalogue_product\".\"id\" IN (SELECT U0.\"id\" FROM \"catalogue_product\" U0 INNER JOIN \"offer_range_excluded_products\" U1 ON (U0.\"id\" = U1.\"product_id\") WHERE U1.\"range_id\" = 18)) AND \"catalogue_product\".\"id\" = 14) LIMIT 1"
      },
      {
        "type": "query",
        "name": "SELECT \"partner_stockrecord\".\"id\", \"partner_stockrecord\".\"product_id\", \"partner_stockrecord\".\"partner_id\", \"partner_stockrecord\".\"partner_sku\", \"partner_stockrecord\".\"price_currency\", \"partner_stockrecord\".\"price\", \"partner_stockrecord\".\"num_in_stock\", \"partner_stockrecord\".\"num_allocated\", \"partner_stockrecord\".\"low_stock_threshold\", \"partner_stockrecord\".\"date_created\", \"partner_stockrecord\".\"date_updated\", \"partner_stockrecord\".\"offer_name\" FROM \"partner_stockrecord\" WHERE \"partner_stockrecord\".\"product_id\" = 14 LIMIT 1"
      },
      {
        "type": "query",
        "name": "SELECT \"catalogue_productclass\".\"id\", \"catalogue_productclass\".\"name\", \"catalogue_productclass\".\"slug\", \"catalogue_productclass\".\"requires_shipping\", \"catalogue_productclass\".\"track_stock\" FROM \"catalogue_productclass\" WHERE \"catalogue_productclass\".\"id\" = 14 LIMIT 21"
      }
    ]
  }
]